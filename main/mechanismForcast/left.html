<script type="text/javascript">
  var gd;
  var rgd;
  var time;
  var token;
  $(document).ready(function(){
    simpleTree($("#mTree"));

    $(".monitorForcast .itemContent .bullet").click(function(event){
      $("#graphTitle").text($(this).text());
      var data = RGraph.array_pad([], 60);
      if (typeof(gd)!="undefined") {
        gd.stopDrawing();
      } 
      if (typeof(rgd)!="undefined") {
        if (typeof(token)!="undefined") {
          clearInterval(token);
        }
      } 
      if (typeof(gd1)!="undefined") {
        gd1.stopDrawing();
      } 
      if (typeof(rgd1)!="undefined") {
        if (typeof(token1)!="undefined") {
          clearInterval(token1);
        }
      } 
      if($(this).attr("real")=="true"){
        if (typeof(time)=="undefined") {time = 0;}
        var sensorId = $(this).attr("id");
        rgd = new RealGraphDrawer("graphContent", data);
        token = setInterval(function(){
          $.ajax({
            url:$.URL.sensor.getDataWithTime+sensorId+"/"+time+".htm",
            dataType:'jsonp',
            success: function(data) {
              var sensorValue = [];
              for (var i = 0; i < data.length; i++) {
                sensorValue = sensorValue.concat(data[i].values[0].value);
                time = data[i].timestamp;
              };
              rgd.drawGraph(sensorValue);
            }
          });
        }, 1000);
      } else {
        gd = new GraphDrawer("graphContent", data);
        gd.drawGraph();
      }
      event.stopPropagation();
    });

    $("#gaosuzhoux").trigger("click");
  });

</script>
<div id="mTree" domain="mechanism" class="monitorForcast">
      <div class="treeItem" scope="qisheng">
            <div class="itemTitle titleShow">起升机构</div>
            <div class="itemContent contentShow">
              <div class="treeItem">
                <div class="itemTitle titleShow">减速机</div>
                <div class="itemConten contentShow">
                  <div class="treeItem">
                    <div class="itemTitle titleShow">振动监测</div>
                    <div class="itemContent contentShow">
                      <div class="bullet" id="gaosuzhoux">高速轴外侧X向振动监测</div>
                      <div class="bullet" id="gaosuzhouy">高速轴外侧Y向振动监测</div>
                      <div class="bullet" id="gaosuzhouz">高速轴外侧Z向振动监测</div>
                      <div class="bullet" id="gaosuzhouzhuansu">高速轴内侧键相传感器</div>
                    </div>
                  </div>
                  <div class="treeItem">
                    <div class="itemTitle titleShow">温度监测</div>
                    <div class="itemContent contentShow">
                      <div class="bullet" id="gaosuzhouxwendu">高速轴轴承外侧温度传感器</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="treeItem">
                <div class="itemTitle titleShow">制动器</div>
                <div class="itemContent contentShow">
                  <div class="bullet menuSelected" id="zd000001" >行程帽行程位移监测</div>
                </div>
              </div>
              
            </div>
          </div>
</div>